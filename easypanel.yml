# Configuração para Easypanel
# https://easypanel.io

name: sar-biome-dashboard
type: app

build:
  type: dockerfile
  dockerfile: Dockerfile

deploy:
  replicas: 1
  resources:
    limits:
      memory: 2Gi
      cpu: "1"
    requests:
      memory: 512Mi
      cpu: "0.5"

ports:
  - name: api
    port: 8080
    protocol: http
    public: true
  - name: dashboard
    port: 8501
    protocol: http
    public: true

env:
  - name: PYTHONUNBUFFERED
    value: "1"
  - name: TZ
    value: "America/Sao_Paulo"

volumes:
  - name: data
    mountPath: /app/uploaded_data
    size: 5Gi

healthCheck:
  path: /api/health
  port: 8080
  initialDelaySeconds: 40
  periodSeconds: 30
  timeoutSeconds: 10
  successThreshold: 1
  failureThreshold: 3

domains:
  - domain: your-domain.com  # Altere para seu domínio
    port: 8501  # Dashboard principal
  - domain: api.your-domain.com  # Altere para seu domínio da API
    port: 8080  # API
